<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prayer Focus</title>
    <link rel="stylesheet" href="popup.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&family=Amiri:wght@700&display=swap" rel="stylesheet">
</head>
<body>

    <div id="loading-view" class="view">
        <div class="loader"></div>
        <p>ุฌุงุฑู ุชุญููู ุงูุจูุงูุงุช...</p>
    </div>

    <div id="onboarding-view" class="view hidden">
        <div class="welcome-card">
            <img src="../../assets/icon-128.png" alt="Logo" class="logo-img">
            <h2>ูุฑุญุจุงู ุจู</h2>
            <p>ูุถุจุท ููุงููุช ุงูุตูุงุฉ ุจุฏูุฉ</p>
            
            <button id="btn-auto-locate" class="btn primary-btn">๐ ุชุญุฏูุฏ ุชููุงุฆู (GPS)</button>
            
            <div class="divider">ุฃู ุจุญุซ ูุฏูู</div>
            
            <div class="search-box">
                <div class="input-wrapper" style="position: relative;">
                    <input type="text" id="city-input" placeholder="ุงุจุฏุฃ ุจูุชุงุจุฉ ุงููุฏููุฉ (ูุซุงู: London)..." autocomplete="off">
                    <ul id="suggestions-list" class="suggestions-list hidden"></ul>
                </div>
                
                <input type="text" id="country-input" placeholder="ุงูุฏููุฉ (ุงุฎุชูุงุฑู)">
                
                <button id="btn-manual-search" class="btn secondary-btn">ุจุญุซ</button>
            </div>
        </div>
    </div>

    <div id="main-view" class="view hidden">
        <header class="main-header">
            <div class="location-badge" id="location-badge-btn">
                <span id="location-name">--</span> ๐
            </div>
            <button id="btn-settings" class="icon-btn">โ๏ธ</button>
        </header>

    <div class="countdown-card" id="dynamic-card">
        <div class="atmosphere-container">
            <div class="stars-layer"></div>
            <div class="clouds-layer">
                <div class="cloud cloud-1"></div>
                <div class="cloud cloud-2"></div>
            </div>
        </div>
        
        <div class="card-content">
            <p class="status-text" id="date-display">ุงูููุช ุงููุชุจูู ููุตูุงุฉ ุงููุงุฏูุฉ</p>
            
            <div id="countdown">00:00:00</div>
            
            <h2 id="next-prayer-name">...</h2>
        </div>
    </div>

        <div class="prayers-list" id="prayers-list">
            </div>
    </div>

    <div id="settings-view" class="view overlay-view hidden">
        <header class="settings-header">
            <h3>ุงูุฅุนุฏุงุฏุงุช</h3>
            <button id="btn-close-settings" class="close-btn">ร</button>
        </header>

        <div class="settings-content">
            <div class="setting-group">
                <label>ุชูุจูู ูุจู ุงูุฃุฐุงู (ุฏูููุฉ)</label>
                <input type="number" id="input-pre-time" min="1" max="60" value="10">
            </div>

            <div class="setting-group">
                <label>ููุช ุงูุฅูุงูุฉ (ุฏูููุฉ)</label>
                <input type="number" id="input-iqama-time" min="1" max="60" value="20">
            </div>

            <div class="setting-group checkbox-group">
                <label>ุตูุช ุงูุฃุฐุงู</label>
                <label class="switch">
                    <input type="checkbox" id="toggle-adhan-sound" checked>
                    <span class="slider round"></span>
                </label>
            </div>

            <div class="setting-group checkbox-group">
                <label>ุชูุจูู ุงูุดุฑูู</label>
                <label class="switch">
                    <input type="checkbox" id="toggle-sunrise">
                    <span class="slider round"></span>
                </label>
            </div>

            <div class="setting-group checkbox-group">
                <label>ุดุงุดุฉ ูุงููุฉ ููุช ุงูุฅูุงูุฉ (ูุถุน ุงูุฎุดูุน)</label>
                <label class="switch">
                    <input type="checkbox" id="toggle-fullscreen-iqama">
                    <span class="slider round"></span>
                </label>
            </div>

            <div class="setting-group">
                <label data-i18n="labelLanguage">ุงููุบุฉ / Language</label>
                <select id="language-select" style="padding: 8px; border-radius: 6px; background: #333; color: white; border: 1px solid #444; width: 100px;">
                    <option value="ar">ุงูุนุฑุจูุฉ</option>
                    <option value="en">English</option>
                </select>
            </div>

            <div style="width: 100%; height: 1px; background: #333; margin: 15px 0;"></div>

            <hr>
            
            <div class="setting-actions">
                <button id="btn-save-settings" class="btn primary-btn">ุญูุธ ุงูุชุบููุฑุงุช</button>
                <button id="btn-reset-location" class="btn danger-btn" style="margin-top: 10px;">๐ ุชุบููุฑ ุงููููุน</button>
            </div>
        </div>
    </div>

    <div id="custom-modal" class="modal-overlay hidden">
        <div class="modal-card">
            <div class="modal-icon" id="modal-icon">?</div>
            <h3 id="modal-title">ุนููุงู</h3>
            <p id="modal-message">ุฑุณุงูุฉ</p>
            
            <div class="modal-actions" id="modal-actions-confirm">
                <button id="btn-modal-yes" class="btn primary-btn">ูุนูุ ุชุฃููุฏ</button>
                <button id="btn-modal-no" class="btn secondary-btn">ุฅูุบุงุก</button>
            </div>
            
            <div class="modal-actions hidden" id="modal-actions-alert">
                <button id="btn-modal-ok" class="btn secondary-btn">ููุงูู</button>
            </div>
        </div>
    </div>

    <script type="module" src="popup.js"></script>
</body>
</html>