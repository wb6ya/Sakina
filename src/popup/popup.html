<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sakina | ุณูููุฉ</title>
    <link rel="stylesheet" href="popup.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&family=Amiri:wght@700&display=swap" rel="stylesheet">
</head>
<body>

    <div id="loading-view" class="view">
        <div class="loader"></div>
        <p>ุฌุงุฑู ุชุญููู ุงูุจูุงูุงุช...</p>
    </div>

    <div id="onboarding-view" class="view hidden">
        <div class="welcome-card">
            <img src="../assets/icon-128.png" alt="Logo" class="logo-img">
            <h2>ูุฑุญุจุงู ุจู</h2>
            <p>ูุถุจุท ููุงููุช ุงูุตูุงุฉ ุจุฏูุฉ</p>
            
            <button id="btn-auto-locate" class="btn primary-btn">๐ ุชุญุฏูุฏ ุชููุงุฆู (GPS)</button>
            
            <div class="divider">ุฃู ุจุญุซ ูุฏูู</div>
            
            <div class="search-box">
                <div class="input-wrapper" style="position: relative;">
                    <input type="text" id="city-input" placeholder="ุงูุชุจ ุงุณู ุงููุฏููุฉ (ูุซุงู: Riyadh)..." autocomplete="off">
                    <ul id="suggestions-list" class="suggestions-list hidden"></ul>
                </div>
                
                <button id="btn-manual-search" class="btn secondary-btn">ุจุญุซ</button>
            </div>
        </div>
    </div>

    <div id="main-view" class="view hidden">
        <header class="main-header">
            <div style="display: flex; flex-direction: column; gap: 4px;">
                <div class="location-badge"><span id="location-name">...</span> ๐</div>
                <div id="current-date" style="font-size: 12px; color: #888; margin-right: 5px;">...</div>
            </div>
            <button id="btn-settings" class="icon-btn" title="ุงูุฅุนุฏุงุฏุงุช">โ๏ธ</button>
        </header>

        <div class="countdown-card" id="dynamic-card">
            <div class="atmosphere-container">
                <div class="stars-layer"></div>
                <div class="clouds-layer">
                    <div class="cloud cloud-1"></div>
                    <div class="cloud cloud-2"></div>
                </div>
            </div>
            
            <div class="card-content">
                <p class="status-text" id="date-display">ุงูููุช ุงููุชุจูู ููุตูุงุฉ ุงููุงุฏูุฉ</p>
                <div id="countdown">00:00:00</div>
                <h2 id="next-prayer-name">...</h2>
            </div>
        </div>

        <div class="prayers-list" id="prayers-list">
            </div>
    </div>

    <div id="settings-view" class="view hidden">
        <div class="settings-header">
            <h3>ุงูุฅุนุฏุงุฏุงุช</h3>
            <button id="btn-close-settings" class="close-btn" title="ุฅุบูุงู">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
        </div>
        
        <div class="settings-content">
            
            <div class="settings-section">
                <h4 class="section-title">ุนุงู</h4>
                <div class="setting-group">
                    <label>ุงููุบุฉ</label>
                    <select id="language-select" class="dropdown-select">
                        <option value="ar">ุงูุนุฑุจูุฉ</option>
                        <option value="en">English</option>
                    </select>
                </div>
                <div class="setting-group checkbox-group">
                    <label for="toggle-fullscreen-iqama">ุดุงุดุฉ ูุงููุฉ ููุช ุงูุฅูุงูุฉ</label>
                    <label class="switch">
                        <input type="checkbox" id="toggle-fullscreen-iqama">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>

            <div class="settings-section">
                <h4 class="section-title">ุงูุชูุจููุงุช</h4>
                <div class="setting-group checkbox-group">
                    <label for="toggle-sunrise">ุชูุจูู ุงูุดุฑูู</label>
                    <label class="switch">
                        <input type="checkbox" id="toggle-sunrise">
                        <span class="slider"></span>
                    </label>
                </div>
                
                <div class="setting-group checkbox-group">
                    <label for="toggle-adhan-sound">ุชุดุบูู ุตูุช ุงูุฃุฐุงู</label>
                    <label class="switch">
                        <input type="checkbox" id="toggle-adhan-sound" checked>
                        <span class="slider"></span>
                    </label>
                </div>
            </div>

            <div class="settings-section">
                <h4 class="section-title">ุงูุฃุฐูุงุฑ</h4>
                <div class="setting-group checkbox-group">
                    <label for="toggle-adhkar">ุชูุนูู ุงูุฃุฐูุงุฑ ุงูุชููุงุฆูุฉ</label>
                    <label class="switch">
                        <input type="checkbox" id="toggle-adhkar">
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="setting-group compact">
                    <label for="input-adhkar-time">ููุช ุงูุชูุฑุงุฑ (ุฏูููุฉ)</label>
                    <input type="number" id="input-adhkar-time" min="5" max="300" value="30">
                </div>
            </div>

            <div class="settings-section">
                <h4 class="section-title">ุงูุชูููุช</h4>
                <div class="time-inputs-row">
                    <div class="setting-group compact">
                        <label for="input-pre-time">ุชูุจูู ูุจู (ุฏ)</label>
                        <input type="number" id="input-pre-time" min="0" max="60" value="15">
                    </div>
                    <div class="setting-group compact">
                        <label for="input-iqama-time">ุงูุชุธุงุฑ ุงูุฅูุงูุฉ (ุฏ)</label>
                        <input type="number" id="input-iqama-time" min="0" max="60" value="25">
                    </div>
                </div>
            </div>
            
            <div class="settings-section audio-card">
                <h4 class="section-title" style="color: var(--primary-color);">ุชุฎุตูุต ุงูุฃุตูุงุช</h4>
                
                <div class="audio-row">
                    <div class="audio-info">
                        <span class="audio-label">ุงูุฃุฐุงู</span>
                        <span id="status-adhan" class="audio-status">ุงูุงูุชุฑุงุถู</span>
                    </div>
                    <div class="audio-actions">
                        <input type="file" id="upload-adhan" accept="audio/*" style="display: none;">
                        <button id="btn-upload-adhan" class="icon-action-btn" title="ุฑูุน ููู">๐</button>
                        <button id="btn-reset-adhan" class="icon-action-btn danger" title="ุงุณุชุนุงุฏุฉ">โบ</button>
                    </div>
                </div>

                <div class="separator"></div>

                <div class="audio-row">
                    <div class="audio-info">
                        <span class="audio-label">ุงูุฅูุงูุฉ</span>
                        <span id="status-iqama" class="audio-status">ุงูุงูุชุฑุงุถู</span>
                    </div>
                    <div class="audio-actions">
                        <input type="file" id="upload-iqama" accept="audio/*" style="display: none;">
                        <button id="btn-upload-iqama" class="icon-action-btn" title="ุฑูุน ููู">๐</button>
                        <button id="btn-reset-iqama" class="icon-action-btn danger" title="ุงุณุชุนุงุฏุฉ">โบ</button>
                    </div>
                </div>
            </div>

            <div class="settings-footer">
                <button id="btn-save-settings" class="btn primary-btn">ุญูุธ ุงูุฅุนุฏุงุฏุงุช</button>
                <button id="btn-reset-location" class="btn danger-outline-btn">ุชุบููุฑ ุงููููุน</button>
            </div>
        </div>
    </div>

    <div id="custom-modal" class="modal-overlay hidden">
        <div class="modal-card">
            <div class="modal-icon" id="modal-icon">?</div>
            <h3 id="modal-title">ุนููุงู</h3>
            <p id="modal-message">ุฑุณุงูุฉ</p>
            
            <div class="modal-actions" id="modal-actions-confirm">
                <button id="btn-modal-yes" class="btn primary-btn">ูุนูุ ุชุฃููุฏ</button>
                <button id="btn-modal-no" class="btn secondary-btn">ุฅูุบุงุก</button>
            </div>
            
            <div class="modal-actions hidden" id="modal-actions-alert">
                <button id="btn-modal-ok" class="btn secondary-btn">ููุงูู</button>
            </div>
        </div>
    </div>

    <script type="module" src="popup.js"></script>
</body>
</html>